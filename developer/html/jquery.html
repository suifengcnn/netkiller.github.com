<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>11.10. jQuery</title><link rel="stylesheet" type="text/css" href="..//docbook.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><meta name="keywords" content="PHP, Python, Perl, Ruby, Java, HTML, XHTML, HTML5, CSS, Javascript, JQuery, C, C++, D" /><link rel="home" href="../index.html" title="Netkiller Developer 手札" /><link rel="up" href="javascript.html" title="第 11 章 Javascript" /><link rel="prev" href="xmlhttp.html" title="11.9. Microsoft.XMLHTTP" /><link rel="next" href="bootstrap.html" title="11.11. Bootstrap" /></head><body><a xmlns="" href="//www.netkiller.cn/">Home</a> |
		<a xmlns="" href="//netkiller.github.io/">简体中文</a> |
	    <a xmlns="" href="http://netkiller.sourceforge.net/">繁体中文</a> |
	    <a xmlns="" href="/journal/index.html">杂文</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/donations.html">打赏(Donations)</a> |
	    <a xmlns="" href="https://github.com/netkiller">Github</a> |
	    <a xmlns="" href="http://my.oschina.net/neochen/">OSChina 博客</a> |
	    <a xmlns="" href="https://cloud.tencent.com/developer/column/2078">云社区</a> |
	    <a xmlns="" href="https://yq.aliyun.com/u/netkiller/">云栖社区</a> |
	    <a xmlns="" href="https://www.facebook.com/bg7nyt">Facebook</a> |
	    <a xmlns="" href="http://cn.linkedin.com/in/netkiller/">Linkedin</a> |
	    <a xmlns="" href="https://zhuanlan.zhihu.com/netkiller">知乎专栏</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/video.html">视频教程</a> |
	    <a xmlns="" href="//www.netkiller.cn/home/about.html">About</a><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">11.10. jQuery</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="xmlhttp.html">上一页</a> </td><th width="60%" align="center">第 11 章 Javascript</th><td width="20%" align="right"> <a accesskey="n" href="bootstrap.html">下一页</a></td></tr></table><hr /></div><table xmlns=""><tr><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=watch&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;repo=netkiller.github.io&amp;type=fork&amp;count=true&amp;size=large" height="30" width="170" frameborder="0" scrolling="0" style="width:170px; height: 30px;" allowTransparency="true"></iframe></td><td><iframe src="//ghbtns.com/github-btn.html?user=netkiller&amp;type=follow&amp;count=true&amp;size=large" height="30" width="240" frameborder="0" scrolling="0" style="width:240px; height: 30px;" allowTransparency="true"></iframe></td></tr></table><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="jquery"></a>11.10. jQuery</h2></div></div></div>
	
	<div class="procedure"><a id="idp176"></a><p class="title"><strong>过程 11.1. </strong></p><ul class="procedure"><li class="step">
		</li></ul></div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="selector"></a>11.10.1. Selectors(选择器)</h3></div></div></div>
		
		<pre class="programlisting">
		
    if(window.location.hostname.indexOf("example.com") !== -1 ){
    	$("#nav3").hide();
    	$("#platform-nav li:nth-child(3)").hide();
    	$("#platform-nav li:nth-child(4)").hide();
    	$(".footer .fcon .coll").hide();
    	$(".footer .fcon .col3").hide();
    	$(".footer .fcon .col4").hide();
    }
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="attr"></a>11.10.2. jQuery 属性操作</h3></div></div></div>
		
		
	<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="is"></a>11.10.2.1. is</h4></div></div></div>
		
		<pre class="programlisting">
		
&lt;a id="startMenu" href="#" class="more"&gt;
		
&lt;section id="menu" class="right_menu disnone"&gt;
  &lt;dl&gt;
    &lt;dt&gt;&lt;i&gt;&lt;/i&gt;&lt;/dt&gt;
    &lt;Dd&gt;您好！创富金融欢迎您&lt;/Dd&gt;
  &lt;/dl&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href="#"&gt;首页&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#"&gt;简介&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#"&gt;...&lt;/a&gt;&lt;/li&gt;
    &lt;div style="clear:both;"&gt;&lt;/div&gt;
  &lt;/ul&gt;
&lt;/section&gt;

&lt;script&gt;
	$(document).ready(function() {
		
		$("#startMenu").click(function() {
			if($("#menu").is(":visible")){
				$("#menu").hide();	
			}else{
				$("#menu").show();
			}
			
		});
	});
&lt;/script&gt;
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="css"></a>11.10.2.2. css</h4></div></div></div>
		
		<pre class="programlisting">
		
$("button").click(function(){
  $("p:first").addClass("intro");
});


	
$( "p" ).removeClass( "myClass yourClass" )
$( "p" ).removeClass( "myClass noClass" ).addClass( "yourClass" );

		
&lt;p&gt;hello&lt;/p&gt;

&lt;p id="hello"&gt;hello&lt;/p&gt;
&lt;script type="text/javascript"&gt;

$("p").addClass("Helloworld");
$("#hello").addClass("Helloworld");

&lt;/script&gt; 
		
		
		</pre>
	</div>
	
	
	
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="time"></a>11.10.3. 时间触发</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp50"></a>11.10.3.1. setTimeout 定时执行一次</h4></div></div></div>
			
			<pre class="screen">
$(document).ready(function(){
	setTimeout(function(){
		$("#error").hide();
	},3000);
});
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp51"></a>11.10.3.2. setInterval 间隔执行</h4></div></div></div>
			
			<pre class="screen">
$(document).ready(function(){
	setInterval(function(){
		alert("test");
	},3000);
});
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="text"></a>11.10.4. text</h3></div></div></div>
		
		<pre class="programlisting">
		
&lt;p&gt;hello&lt;/p&gt;

&lt;p id="hello"&gt;hello&lt;/p&gt;
&lt;script type="text/javascript"&gt;

$("p").text("Helloworld");
$("#hello").text("Helloworld");

&lt;/script&gt; 
		
		
		</pre>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="inArray"></a>11.10.5. inArray</h3></div></div></div>
		
		<p>返回值是数组的key</p>
		<pre class="screen">
	var host = window.location.hostname;
	var domains = ["netkiller.github.io","www.netkiller.cn"];

	if(jQuery.inArray( host, domains ) != -1) {
	...
	...		
	}
		</pre>
		
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="ajax"></a>11.10.6. Ajax</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="ajax.load"></a>11.10.6.1. Load</h4></div></div></div>
			
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp52"></a>11.10.6.2. GET</h4></div></div></div>
			
			<pre class="programlisting">
			
jQuery.ajax({
	type:"GET",
	url: "/path/to/url",
	data: "code="+code,
	success:function(data){
		if(data.status){
			alert(data.text)
		}
	},
	error: function(){
	}
}); 			
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp53"></a>11.10.6.3. Post</h4></div></div></div>
			
			<pre class="screen">
			

			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp54"></a>11.10.6.4. jsonp</h4></div></div></div>
			
			<pre class="screen">
			
&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
$.getJSON('http://www.foobar.com/json.php?callback=?', function(data){
alert(data.foo);
});
&lt;/script&gt;

&lt;?php
echo $_GET['callback'], '(', json_encode(array('foo' =&gt; 'bar')), ')';
?&gt;
			
			</pre>
			
			<pre class="programlisting">
			
// Using YQL and JSONP
$.ajax({
    url: "http://query.yahooapis.com/v1/public/yql",
 
    // The name of the callback parameter, as specified by the YQL service
    jsonp: "callback",
 
    // Tell jQuery we're expecting JSONP
    dataType: "jsonp",
 
    // Tell YQL what we want and that we want JSON
    data: {
        q: "select title,abstract,url from search.news where query=\"cat\"",
        format: "json"
    },
 
    // Work with the response
    success: function( response ) {
        console.log( response ); // server response
    }
});
			
			</pre>
			
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp55"></a>11.10.6.5. No 'Access-Control-Allow-Origin' header is present on the requested resource.</h4></div></div></div>
			
			<p>原因是 ajax 跨域请求造成</p>
			<p>将 dataType: 'JSON' 替换为 dataType: 'JSONP'</p>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp56"></a>11.10.6.6. 同步 AJAX</h4></div></div></div>
			
			<p>Jquery ajax 请求默认是异步方式，通过 async: false, 参数修改为同步模式。</p>
			<pre class="screen">
			
	function exchange(money){
			var amount = 0;
			jQuery.ajax({
				type: "GET",
				url: "ajax.php?money=" + money,
				dataType: "json",
				async: false,
				data: "",
				success: function (data) {
					if (data.amount) {
						amount = data.amount
					}
				},
				error: function () {
				}
			});
		return amount;
		}		
			
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="form"></a>11.10.7. Form 表单处理</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp57"></a>11.10.7.1. select</h4></div></div></div>
			
			<pre class="programlisting">
			
	var select = $('#bank');
	//$('option', select).remove();
	$.each(banklist, function(key,code) {
		var option = new Option(key, code)
	    select.append( option );
	});			
			
	$('#bank').append($("&lt;option&gt;&lt;/option&gt;").attr("value","CMB").text("招商银行"));
			
			</pre>
		</div>
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp58"></a>11.10.7.2. input</h4></div></div></div>
			
			<p>设置 value</p>
			<pre class="screen">
$("#amount").val("100");
			</pre>
		</div>
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="event"></a>11.10.8. Jquery 事件</h3></div></div></div>
		
		<div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="idp59"></a>11.10.8.1. click 事件</h4></div></div></div>
			
		</div>
		<pre class="programlisting">
		
$(document).ready(function() {

	$("#Button1").click(function() {
		$("#Tab1").hide();
		$("#Tab2").show();
	});
	$("#Button2").click(function() {
		$("#Tab1").show();
		$("#Tab2").hide();
	});	
});			
		
		</pre>
		<p>解除事件绑定</p>
		<pre class="programlisting">
		
$( "#Button1").unbind( "click" );
$( "#Button2").unbind( "click" );		
		
		</pre>
		<p>事件中绑定事件</p>
		<pre class="programlisting">
		
			
$("#Button").click(function() {	
	$( "#Button1").unbind( "click" );
	$( "#Button2").unbind( "click" );
	
	$("#Button1").click(function() {
		$("#Tab1").hide();
		$("#Tab2").show();
	});
	$("#Button2").click(function() {
		$("#Tab1").show();
		$("#Tab2").hide();
	});	
});	
		
		</pre>		
	</div>
	<div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="garlic.js"></a>11.10.9. Garlic.js - 表单数据持久化</h3></div></div></div>
		
		<p>http://garlicjs.org/</p>
		<p>Garlic.js 可以让你自动的持久化表单中的数据到本地，直到表单被提交。这样用户就不用担心因为误操作导致表单输入的数据丢失。</p>
		<p>使用方法很简单：</p>
		<pre class="screen">
		
&lt;script type="text/javascript"&gt;
  $( 'form' ).garlic();
&lt;/script&gt;
		
		</pre>
	</div>
</div><div xmlns="" id="disqus_thread"></div><script xmlns="">

var disqus_config = function () {
this.page.url = "http://www.netkiller.cn";  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'netkiller'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//netkiller.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><noscript xmlns="">Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><br xmlns="" /><script xmlns="" type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?u=r5HG&amp;d=9mi5r_kkDC8uxG8HuY3p4-2qgeeVypAK9vMD-2P6BYM"></script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="xmlhttp.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="javascript.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="bootstrap.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">11.9. Microsoft.XMLHTTP </td><td width="20%" align="center"><a accesskey="h" href="../index.html">起始页</a></td><td width="40%" align="right" valign="top"> 11.11. Bootstrap</td></tr></table></div><script xmlns="">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11694057-1', 'auto');
  ga('send', 'pageview');

</script><script xmlns="" async="async">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?93967759a51cda79e49bf4e34d0b0f2c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script xmlns="" async="async">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script><script xmlns="" type="text/javascript" src="/js/q.js" async="async"></script></body></html>